# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.


План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

## Ответ:

```
Так как в задании для Для БД и Фронтэнда  кол-во ядер не указано, использую произвольные (интуитивные)
    БД - 8 ядер
    Фронтенд - 1

Аналогично для Дисков:
    БД - 20 ГБ
    Кэш - 20 ГБ
    Фронт - 1 ГБ
    Бэк - 3 ГБ
```

Расчет параметров кластера:

| Наименование     | На одну ноду | Число нод | Всего | Коэффициент резервирования | Итого  |
| ---------------- | ------------ | --------- | ----- | -------------------------- | -----  |
| Дисковые ресурсы |              |           |       |                            | 232,5  |
| БД               | 20           |	3         |	60    |	1,5                        | 90     |
| Кэш              | 20           | 3         | 60    | 1,5                        | 90     |
| Фронт	           | 1            | 5         |	5     |	1.5                        | 7,5    |
| Бэк              | 3            |	10        |	30    |	1,5                        | 45     |
| Ядра CPU         |              |           |       |                            | 63     |
| БД               | 8            |	3         |	24    |	1,5                        | 36     |
| Кэш              | 1            | 3         | 3     | 1,5                        | 4,5    |
| Фронт	           | 1            | 5         |	5     |	1.5                        | 7,5    |
| Бэк              | 1            |	10        |	10    |	1,5                        | 15     |
| RAM (ОЗУ)        |              |           |       |                            | 45,375 |
| БД               | 4            |	3         |	12    |	1,5                        | 18     |
| Кэш              | 4            | 3         | 12    | 1,5                        | 18     |
| Фронт	           | 0,05         | 5         |	0,25  |	1.5                        | 0,375  |
| Бэк              | 0,6          |	10        |	6     |	1,5                        | 9      |
| ---------------- | ------------ | --------- | ----- | -------------------------- | ------ |

Расчет общесистемных параметров:

| Наименование           | На одну ноду | Число нод | Всего |
| ---------------------- | ------------ | --------- | ----- |
| Дисковые ресурсы       |              |           | 640   |
| Master node            | 100          | 3         | 300   |
| Worker node            | 100          | 3         | 300   |
| OC                     | 10           | 1         | 10    |
| Centralized monitoring | 20           | 1         | 20    |
| Centralized logging    | 10           | 1         | 10    |
| Ядра CPU               |              |           | 14    |
| Master node            | 2            | 3         | 6     |
| Worker node            | 1            | 3         | 3     |
| OC                     | 1            | 1         | 1     |
| Centralized monitoring | 2            | 1         | 2     |
| Centralized logging    | 2            | 1         | 2     |
| RAM (ОЗУ)              |              |           | 26    |
| Master node            | 2            | 3         | 6     |
| Worker node            | 1            | 3         | 3     |
| OC                     | 1            | 1         | 1     |
| Centralized monitoring | 5            | 1         | 5     |
| Centralized logging    | 11           | 1         | 11    |

### ИТОГО

RAM: 71,375 Gb (для закупа в бюджете полагаю будет 72 или 80, в заивисмости от используемой памяти , точнее минимального размера железного "модуля")
CPU:77 Ядер (для закупа в бюджете полагаю будет  96, так как виртуальные системы используют кратность 24 или 32 на физический сервер [блэйд])
HDD: 872.5 Gb (для закупа в бюджете полагаю будет 1ТБ, точнее 2 ТБ с учетом резервирования места под Бэкапы и т.п.)
