# Домашнее задание к занятию "12.4 Развертывание кластера на собственных серверах, лекция 2"
Новые проекты пошли стабильным потоком. Каждый проект требует себе несколько кластеров: под тесты и продуктив. Делать все руками — не вариант, поэтому стоит автоматизировать подготовку новых кластеров.

## Задание 1: Подготовить инвентарь kubespray
Новые тестовые кластеры требуют типичных простых настроек. Нужно подготовить инвентарь и проверить его работу. Требования к инвентарю:
* подготовка работы кластера из 5 нод: 1 мастер и 4 рабочие ноды;
* в качестве CRI — containerd;
* запуск etcd производить на мастере.

### Ответ:

1. Инвертарь kubespray

Ход решения:

1) Добавил публичный ключь на все машины для авторизации по SSH
Сгенерировал ключ
```
$ ssh-keygen -t rsa
```

2) Скопировал ключ на ноды
```
$ cd .ssh
$ vi authorized_keys 
$ chmod 600 authorized_keys 
$ 
```

3) В `group_vars/k8s_cluster` поменял параметр на `container_manager: containerd`

4) Создал файл инвентаря. [Ссылка на Инвентарь](https://github.com/kezan860/netology_devkube/blob/master/08_k8s_4/src/ansible/inventory.ini)

5) Запустил команду
```
$ ansible-playbook -i inventory.ini --become --become-user=root cluster.yml
```
